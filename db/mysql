一. 基础知识
1. Summary of MySQL Commands 
For detailed syntax, check MySQL manual "SQL Statement Syntax"
@ http://dev.mysql.com/doc/refman/5.5/en/sql-syntax.html.

-- Database-Level
DROP DATABASE databaseName -- Delete the database (irrecoverable!)
DROP DATABASE IF EXISTS databaseName -- Delete if it exists
CREATE DATABASE databaseName -- Create a new database
CREATE DATABASE IF NOT EXISTS databaseName -- Create only if it does not exists
SHOW DATABASES -- Show all the databases in this server
USE databaseName -- Set the default (current) database
SELECT DATABASE() -- Show the default database
SHOW CREATE DATABASE databaseName -- Show the CREATE DATABASE statement

-- Table-Level
DROP TABLE [IF EXISTS] tableName , ...
CREATE TABLE [IF NOT EXISTS] tableName (
columnName columnType columnAttribute , ...
PRIMARY KEY( columnName ),
FOREIGN KEY ( columnNmae ) REFERENCES tableName ( columnNmae )
)
SHOW TABLES -- Show all the tables in the default database
DESCRIBE|DESC tableName -- Describe the details for a table
ALTER TABLE tableName ... -- Modify a table, e.g., ADD COLUMN and DROP COLUMN
ALTER TABLE tableName ADD columnDefinition
ALTER TABLE tableName DROP columnName
ALTER TABLE tableName ADD FOREIGN KEY ( columnNmae ) REFERENCES tableName
( columnNmae )ALTER TABLE tableName DROP FOREIGN KEY constraintName
SHOW CREATE TABLE tableName -- Show the CREATE TABLE statement for this
tableName

-- Row-Level
INSERT INTO tableName
VALUES ( column1Value , column2Value ,...) -- Insert on all Columns
INSERT INTO tableName
VALUES ( column1Value , column2Value ,...), ... -- Insert multiple rows
INSERT INTO tableName ( column1Name , ..., columnNName )
VALUES ( column1Value , ..., columnNValue ) -- Insert on selected
Columns
DELETE FROM tableName WHERE criteria
UPDATE tableName SET columnName = expr , ... WHERE criteria
SELECT * | column1Name AS alias1 , ..., columnNName AS aliasN
FROM tableName
WHERE criteria
GROUP BY columnName
ORDER BY columnName ASC |DESC, ...
HAVING groupConstraints
LIMIT count | offset count

-- Others
SHOW WARNINGS; -- Show the warnings of the previous statement

2. SQL Tutorial
2.1. CREATE DATABASE and DROP DATABASE
mysql> create database if not exists southwind;
Query OK, 1 row affected (0.00 sec)

mysql> SHOW CREATE DATABASE southwind;
+-----------+----------------------------------------------------------------------+
| Database  | Create Database                                                      |
+-----------+----------------------------------------------------------------------+
| southwind | CREATE DATABASE `southwind` /*!40100 DEFAULT CHARACTER SET latin1 */ |
+-----------+----------------------------------------------------------------------+
1 row in set (0.00 sec)

mysql> drop database if exists southwind;
Query OK, 0 rows affected (0.00 sec)

2.2. Setting the Default Database 
mysql> use southwind;
Database changed
mysql> select database();
+------------+
| database() |
+------------+
| southwind  |
+------------+
1 row in set (0.00 sec)

2.3. Creating and Deleting a Table 
mysql> CREATE TABLE IF NOT EXISTS products (
    -> productID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    -> productCode CHAR(3) NOT NULL DEFAULT '',
    -> name VARCHAR(30) NOT NULL DEFAULT '',
    -> quantity INT UNSIGNED NOT NULL DEFAULT 0,
    -> price DECIMAL(7,2) NOT NULL DEFAULT 99999.99,
    -> PRIMARY KEY (productID)
    -> );
Query OK, 0 rows affected (0.04 sec)

mysql> show tables;
+---------------------+
| Tables_in_southwind |
+---------------------+
| products            |
+---------------------+
1 row in set (0.00 sec)

mysql> desc products;
+-------------+------------------+------+-----+----------+----------------+
| Field       | Type             | Null | Key | Default  | Extra          |
+-------------+------------------+------+-----+----------+----------------+
| productID   | int(10) unsigned | NO   | PRI | NULL     | auto_increment |
| productCode | char(3)          | NO   |     |          |                |
| name        | varchar(30)      | NO   |     |          |                |
| quantity    | int(10) unsigned | NO   |     | 0        |                |
| price       | decimal(7,2)     | NO   |     | 99999.99 |                |
+-------------+------------------+------+-----+----------+----------------+
5 rows in set (0.00 sec)

mysql> show create table products;
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Table    | Create Table                                                                                                                                                                                                                                                                                                                                        |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| products | CREATE TABLE `products` (
  `productID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `productCode` char(3) NOT NULL DEFAULT '',
  `name` varchar(30) NOT NULL DEFAULT '',
  `quantity` int(10) unsigned NOT NULL DEFAULT '0',
  `price` decimal(7,2) NOT NULL DEFAULT '99999.99',
  PRIMARY KEY (`productID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 |
+----------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec)

2.4 Inserting Rows 
mysql> INSERT INTO products VALUES (1001, 'PEN', 'Pen Red', 5000, 1.23);
Query OK, 1 row affected (0.01 sec)

mysql> select * from products;
+-----------+-------------+---------+----------+-------+
| productID | productCode | name    | quantity | price |
+-----------+-------------+---------+----------+-------+
|      1001 | PEN         | Pen Red |     5000 |  1.23 |
+-----------+-------------+---------+----------+-------+
1 row in set (0.00 sec)

mysql> INSERT INTO products VALUES
    -> (NULL, 'PEN', 'Pen Blue', 8000, 1.25),
    -> (NULL, 'PEN', 'Pen Black', 2000, 1.25);
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> INSERT INTO products (productCode, name, quantity, price) VALUES
    -> ('PEC', 'Pencil 2B', 10000, 0.48),
    -> ('PEC', 'Pencil 2H', 8000, 0.49);
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> INSERT INTO products (productCode, name) VALUES ('PEC', 'Pencil HB');
Query OK, 1 row affected (0.00 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

2.5 Select
mysql> select name, price from products;
+-----------+----------+
| name      | price    |
+-----------+----------+
| Pen Red   |     1.23 |
| Pen Blue  |     1.25 |
| Pen Black |     1.25 |
| Pencil 2B |     0.48 |
| Pencil 2H |     0.49 |
| Pencil HB | 99999.99 |
+-----------+----------+
6 rows in set (0.00 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> select 1+1;
+-----+
| 1+1 |
+-----+
|   2 |
+-----+
1 row in set (0.06 sec)

mysql> select now();
+---------------------+
| now()               |
+---------------------+
| 2016-09-27 15:38:49 |
+---------------------+
1 row in set (0.01 sec)

mysql> select 1+1, now();
+-----+---------------------+
| 1+1 | now()               |
+-----+---------------------+
|   2 | 2016-09-27 15:39:25 |
+-----+---------------------+
1 row in set (0.00 sec)

mysql> select name, price from products where price < 1.0;
+-----------+-------+
| name      | price |
+-----------+-------+
| Pencil 2B |  0.48 |
| Pencil 2H |  0.49 |
+-----------+-------+
2 rows in set (0.00 sec)

mysql> select name, quantity from products where quantity <= 2000;
+-----------+----------+
| name      | quantity |
+-----------+----------+
| Pen Black |     2000 |
| Pencil HB |        0 |
+-----------+----------+
2 rows in set (0.00 sec)

mysql> select name, quantity from products where productCode = "PEN";
+-----------+----------+
| name      | quantity |
+-----------+----------+
| Pen Red   |     5000 |
| Pen Blue  |     8000 |
| Pen Black |     2000 |
+-----------+----------+
3 rows in set (0.00 sec)

mysql> select name, quantity from products where name like "Pencil%";
+-----------+----------+
| name      | quantity |
+-----------+----------+
| Pencil 2B |    10000 |
| Pencil 2H |     8000 |
| Pencil HB |        0 |
+-----------+----------+
3 rows in set (0.01 sec)

mysql> select name, quantity from products where name like "P__%";
+-----------+----------+
| name      | quantity |
+-----------+----------+
| Pen Red   |     5000 |
| Pen Blue  |     8000 |
| Pen Black |     2000 |
| Pencil 2B |    10000 |
| Pencil 2H |     8000 |
| Pencil HB |        0 |
+-----------+----------+
6 rows in set (0.00 sec)

mysql> select * from products where quantity >= 5000 and name like "Pen%";
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1001 | PEN         | Pen Red   |     5000 |  1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |  1.25 |
|      1004 | PEC         | Pencil 2B |    10000 |  0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |  0.49 |
+-----------+-------------+-----------+----------+-------+
4 rows in set (0.00 sec)

mysql> select * from products where quantity >= 5000 and name like "Pen%" and price < 1.24;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1001 | PEN         | Pen Red   |     5000 |  1.23 |
|      1004 | PEC         | Pencil 2B |    10000 |  0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |  0.49 |
+-----------+-------------+-----------+----------+-------+
3 rows in set (0.00 sec)

mysql> select * from products where not(quantity >= 5000 and name like "Pen%" and price < 1.24);
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
3 rows in set (0.00 sec)

mysql> select * from products where name in ('Pen Red', 'Pen Black') ;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1001 | PEN         | Pen Red   |     5000 |  1.23 |
|      1003 | PEN         | Pen Black |     2000 |  1.25 |
+-----------+-------------+-----------+----------+-------+
2 rows in set (0.00 sec)

mysql> select * from products where (price between 1.0 and 2.0);
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1001 | PEN         | Pen Red   |     5000 |  1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |  1.25 |
|      1003 | PEN         | Pen Black |     2000 |  1.25 |
+-----------+-------------+-----------+----------+-------+
3 rows in set (0.00 sec)

mysql> select * from products where productCode is NULL;
Empty set (0.00 sec)

mysql> select * from products where name like 'Pen%' order by price;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> select * from products where name like 'Pen%' order by price,quantity;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> select * from products where name like 'Pen%' order by price,quantity limit 2;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1004 | PEC         | Pencil 2B |    10000 |  0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |  0.49 |
+-----------+-------------+-----------+----------+-------+
2 rows in set (0.00 sec)

mysql> select * from products where name like 'Pen%' order by price,quantity limit 2,1;
+-----------+-------------+---------+----------+-------+
| productID | productCode | name    | quantity | price |
+-----------+-------------+---------+----------+-------+
|      1001 | PEN         | Pen Red |     5000 |  1.23 |
+-----------+-------------+---------+----------+-------+
1 row in set (0.00 sec)

mysql> select productID as ID, price as `Unit Price` from products order by ID;
+------+------------+
| ID   | Unit Price |
+------+------------+
| 1001 |       1.23 |
| 1002 |       1.25 |
| 1003 |       1.25 |
| 1004 |       0.48 |
| 1005 |       0.49 |
| 1006 |   99999.99 |
+------+------------+
6 rows in set (0.00 sec)

mysql> select concat (productCode, '-', name) as `product Description`, price from products;
+---------------------+----------+
| product Description | price    |
+---------------------+----------+
| PEN-Pen Red         |     1.23 |
| PEN-Pen Blue        |     1.25 |
| PEN-Pen Black       |     1.25 |
| PEC-Pencil 2B       |     0.48 |
| PEC-Pencil 2H       |     0.49 |
| PEC-Pencil HB       | 99999.99 |
+---------------------+----------+
6 rows in set (0.00 sec)

mysql> select price from products;
+----------+
| price    |
+----------+
|     1.23 |
|     1.25 |
|     1.25 |
|     0.48 |
|     0.49 |
| 99999.99 |
+----------+
6 rows in set (0.00 sec)

mysql> select distinct price from products;
+----------+
| price    |
+----------+
|     1.23 |
|     1.25 |
|     0.48 |
|     0.49 |
| 99999.99 |
+----------+
5 rows in set (0.00 sec)

mysql> select distinct price as `Distinct Price` from products;
+----------------+
| Distinct Price |
+----------------+
|           1.23 |
|           1.25 |
|           0.48 |
|           0.49 |
|       99999.99 |
+----------------+
5 rows in set (0.00 sec)

mysql> select distinct price, name from products;
+----------+-----------+
| price    | name      |
+----------+-----------+
|     1.23 | Pen Red   |
|     1.25 | Pen Blue  |
|     1.25 | Pen Black |
|     0.48 | Pencil 2B |
|     0.49 | Pencil 2H |
| 99999.99 | Pencil HB |
+----------+-----------+
6 rows in set (0.00 sec)

mysql> select * from products order by productCode, productID;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> select * from products group by productCode;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1004 | PEC         | Pencil 2B |    10000 |  0.48 |
|      1001 | PEN         | Pen Red   |     5000 |  1.23 |
+-----------+-------------+-----------+----------+-------+
2 rows in set (0.00 sec)

mysql> select count(*) as `Count` from products;
+-------+
| Count |
+-------+
|     6 |
+-------+
1 row in set (0.00 sec)

mysql> select productCode, count(*) from products group by productCode;
+-------------+----------+
| productCode | count(*) |
+-------------+----------+
| PEC         |        3 |
| PEN         |        3 |
+-------------+----------+
2 rows in set (0.01 sec)

mysql> select productCode, count(*) as `Count` from products group by productCode order by Count desc;
+-------------+-------+
| productCode | Count |
+-------------+-------+
| PEN         |     3 |
| PEC         |     3 |
+-------------+-------+
2 rows in set (0.00 sec)

mysql> select MAX(price), MIN(price), AGV(price), STD(price), SUM(quantity) from products;
ERROR 1305 (42000): FUNCTION southwind.AGV does not exist
mysql> select MAX(price), MIN(price), AVG(price), STD(price), SUM(quantity) from products;
+------------+------------+--------------+--------------+---------------+
| MAX(price) | MIN(price) | AVG(price)   | STD(price)   | SUM(quantity) |
+------------+------------+--------------+--------------+---------------+
|   99999.99 |       0.48 | 16667.448333 | 37267.445582 |         33000 |
+------------+------------+--------------+--------------+---------------+
1 row in set (0.00 sec)

mysql> select MAX(price) as `Highest Price`, MIN(price) as `Lowest Price` from products group by productCode;
+---------------+--------------+
| Highest Price | Lowest Price |
+---------------+--------------+
|      99999.99 |         0.48 |
|          1.25 |         1.23 |
+---------------+--------------+
2 rows in set (0.00 sec)

mysql> select MAX(price), MIN(price), CAST(AVG(price) as DECIMAL(7, 2)) as `AVERAGE`  from products group by productCode;
+------------+------------+----------+
| MAX(price) | MIN(price) | AVERAGE  |
+------------+------------+----------+
|   99999.99 |       0.48 | 33333.65 |
|       1.25 |       1.23 |     1.24 |
+------------+------------+----------+
2 rows in set (0.00 sec)

mysql> select productCode, count(*) as `Count` from products group by productCode having count>=3;
+-------------+-------+
| productCode | Count |
+-------------+-------+
| PEC         |     3 |
| PEN         |     3 |
+-------------+-------+
2 rows in set (0.00 sec)

mysql> select productCode, count(*) as `Count` from products group by productCode with ROLLUP;
+-------------+-------+
| productCode | Count |
+-------------+-------+
| PEC         |     3 |
| PEN         |     3 |
| NULL        |     6 |
+-------------+-------+
3 rows in set (0.00 sec)

mysql> 

2.6 Modify data
mysql> select * from products;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1001 | PEN         | Pen Red   |     5000 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.25 |
|      1003 | PEN         | Pen Black |     2000 |     1.25 |
|      1004 | PEC         | Pencil 2B |    10000 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.49 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> update products set price = price * 1.1;
Query OK, 5 rows affected, 6 warnings (0.03 sec)
Rows matched: 6  Changed: 5  Warnings: 6

mysql> select * from products;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1001 | PEN         | Pen Red   |     5000 |     1.35 |
|      1002 | PEN         | Pen Blue  |     8000 |     1.38 |
|      1003 | PEN         | Pen Black |     2000 |     1.38 |
|      1004 | PEC         | Pencil 2B |    10000 |     0.53 |
|      1005 | PEC         | Pencil 2H |     8000 |     0.54 |
|      1006 | PEC         | Pencil HB |        0 | 99999.99 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

mysql> update products set price = price / 1.1, quantity=quantity+50;
Query OK, 6 rows affected, 6 warnings (0.01 sec)
Rows matched: 6  Changed: 6  Warnings: 6

mysql> select * from products;
+-----------+-------------+-----------+----------+----------+
| productID | productCode | name      | quantity | price    |
+-----------+-------------+-----------+----------+----------+
|      1001 | PEN         | Pen Red   |     5050 |     1.23 |
|      1002 | PEN         | Pen Blue  |     8050 |     1.25 |
|      1003 | PEN         | Pen Black |     2050 |     1.25 |
|      1004 | PEC         | Pencil 2B |    10050 |     0.48 |
|      1005 | PEC         | Pencil 2H |     8050 |     0.49 |
|      1006 | PEC         | Pencil HB |       50 | 90909.08 |
+-----------+-------------+-----------+----------+----------+
6 rows in set (0.00 sec)

2.7. Delete row
mysql> delete from products where name like "Pen%";
Query OK, 6 rows affected (0.00 sec)

mysql> select * from products;
Empty set (0.00 sec)

2.8. Load data into mysql
[root@httpsource ~]# cat products_in.csv 
\N,PEC,Pencil 3B,500,0.52
\N,PEC,Pencil 4B,200,0.62
\N,PEC,Pencil 5B,100,0.73
\N,PEC,Pencil 6B,500,0.47
[root@httpsource ~]# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 14773
Server version: 5.5.47 MySQL Community Server (GPL) by Remi

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sms                |
| southwind          |
| statistics         |
| test               |
+--------------------+
7 rows in set (0.00 sec)

mysql> use southwind;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> show tables;
+---------------------+
| Tables_in_southwind |
+---------------------+
| products            |
+---------------------+
1 row in set (0.00 sec)

mysql> delete from products;
Query OK, 1 row affected (0.00 sec)

mysql> LOAD DATA LOCAL INFILE 'products_in.csv' INTO TABLE products
    -> COLUMNS TERMINATED BY ','
    -> LINES TERMINATED BY '\n';
Query OK, 4 rows affected (0.00 sec)
Records: 4  Deleted: 0  Skipped: 0  Warnings: 0

mysql> select * from products;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      1008 | PEC         | Pencil 3B |      500 |  0.52 |
|      1009 | PEC         | Pencil 4B |      200 |  0.62 |
|      1010 | PEC         | Pencil 5B |      100 |  0.73 |
|      1011 | PEC         | Pencil 6B |      500 |  0.47 |
+-----------+-------------+-----------+----------+-------+
4 rows in set (0.01 sec)
mysql> delete from products;
Query OK, 4 rows affected (0.01 sec)

[root@httpsource ~]# cat products.tsv 
\N      PEC     Pencil  3B      500     0.52
\N      PEC     Pencil  4B      200     0.62
\N      PEC     Pencil  5B      100     0.73
\N      PEC     Pencil  6B      500     0.47
[root@httpsource ~]# mysqlimport -u root -p --local southwind products.tsv
Enter password: 
southwind.products: Records: 4  Deleted: 0  Skipped: 0  Warnings: 8
[root@httpsource ~]# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 14795
Server version: 5.5.47 MySQL Community Server (GPL) by Remi

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> use southwind;
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
mysql> select * from products;
+-----------+-------------+--------+----------+--------+
| productID | productCode | name   | quantity | price  |
+-----------+-------------+--------+----------+--------+
|      1036 | PEC         | Pencil |        3 | 500.00 |
|      1037 | PEC         | Pencil |        4 | 200.00 |
|      1038 | PEC         | Pencil |        5 | 100.00 |
|      1039 | PEC         | Pencil |        6 | 500.00 |
+-----------+-------------+--------+----------+--------+
4 rows in set (0.01 sec)

2.9 Running sql script
[root@httpsource ~]# cat load_products.sql 
use southwind;
DELETE FROM products;
INSERT INTO products VALUES (2001, 'PEC', 'Pencil 3B', 500, 0.52),
(NULL, 'PEC', 'Pencil 4B', 200, 0.62),
(NULL, 'PEC', 'Pencil 5B', 100, 0.73),
(NULL, 'PEC', 'Pencil 6B', 500, 0.47);
SELECT * FROM products;
[root@httpsource ~]# mysql -u root -p
Enter password: 
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 14801
Server version: 5.5.47 MySQL Community Server (GPL) by Remi

Copyright (c) 2000, 2015, Oracle and/or its affiliates. All rights reserved.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

mysql> source load_products.sql 
Reading table information for completion of table and column names
You can turn off this feature to get a quicker startup with -A

Database changed
Query OK, 0 rows affected (0.00 sec)

Query OK, 4 rows affected (0.00 sec)
Records: 4  Duplicates: 0  Warnings: 0

+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |
+-----------+-------------+-----------+----------+-------+
4 rows in set (0.00 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+-------+
| productID | productCode | name      | quantity | price |
+-----------+-------------+-----------+----------+-------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |
+-----------+-------------+-----------+----------+-------+
4 rows in set (0.00 sec)

3. More Than One Tables
3.1 One-To-Many Relationship
mysql> show tables;
+---------------------+
| Tables_in_southwind |
+---------------------+
| products            |
| suppliers           |
+---------------------+
2 rows in set (0.01 sec)

mysql> 
mysql> 
mysql> select * from suppliers;
Empty set (0.00 sec)

mysql> USE southwind;
Database changed
mysql> 
mysql> 
mysql> DROP TABLE IF EXISTS suppliers;
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> 
mysql> 
mysql> 
mysql> CREATE TABLE suppliers (
    -> supplierID INT UNSIGNED NOT NULL AUTO_INCREMENT,
    -> name VARCHAR(30) NOT NULL DEFAULT '',
    -> phone CHAR(8) NOT NULL DEFAULT '',
    -> PRIMARY KEY (supplierID)
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> 
mysql> 
mysql> DESCRIBE suppliers;
+------------+------------------+------+-----+---------+----------------+
| Field      | Type             | Null | Key | Default | Extra          |
+------------+------------------+------+-----+---------+----------------+
| supplierID | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| name       | varchar(30)      | NO   |     |         |                |
| phone      | char(8)          | NO   |     |         |                |
+------------+------------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

mysql> 
mysql> 
mysql> 
mysql> INSERT INTO suppliers VALUE
    -> (501, 'ABC Traders', '88881111'),
    -> (502, 'XYZ Company', '88882222'),
    -> (503, 'QQ Corp', '88883333');
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> select * from suppliers;
+------------+-------------+----------+
| supplierID | name        | phone    |
+------------+-------------+----------+
|        501 | ABC Traders | 88881111 |
|        502 | XYZ Company | 88882222 |
|        503 | QQ Corp     | 88883333 |
+------------+-------------+----------+
3 rows in set (0.00 sec)

mysql> 
mysql> 
mysql> ALTER TABLE products
    -> ADD COLUMN supplierID INT UNSIGNED NOT NULL;
Query OK, 4 rows affected (0.05 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> 
mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |          0 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |          0 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |          0 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |          0 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> desc products;
+-------------+------------------+------+-----+----------+----------------+
| Field       | Type             | Null | Key | Default  | Extra          |
+-------------+------------------+------+-----+----------+----------------+
| productID   | int(10) unsigned | NO   | PRI | NULL     | auto_increment |
| productCode | char(3)          | NO   |     |          |                |
| name        | varchar(30)      | NO   |     |          |                |
| quantity    | int(10) unsigned | NO   |     | 0        |                |
| price       | decimal(7,2)     | NO   |     | 99999.99 |                |
| supplierID  | int(10) unsigned | NO   |     | NULL     |                |
+-------------+------------------+------+-----+----------+----------------+
6 rows in set (0.00 sec)

mysql>  UPDATE products SET supplierID = 501;
Query OK, 4 rows affected (0.00 sec)
Rows matched: 4  Changed: 4  Warnings: 0

mysql> desc products;
+-------------+------------------+------+-----+----------+----------------+
| Field       | Type             | Null | Key | Default  | Extra          |
+-------------+------------------+------+-----+----------+----------------+
| productID   | int(10) unsigned | NO   | PRI | NULL     | auto_increment |
| productCode | char(3)          | NO   |     |          |                |
| name        | varchar(30)      | NO   |     |          |                |
| quantity    | int(10) unsigned | NO   |     | 0        |                |
| price       | decimal(7,2)     | NO   |     | 99999.99 |                |
| supplierID  | int(10) unsigned | NO   |     | NULL     |                |
+-------------+------------------+------+-----+----------+----------------+
6 rows in set (0.00 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |        501 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |        501 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |        501 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |        501 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> 
mysql> 
mysql> ALTER TABLE products
    -> ADD FOREIGN KEY (supplierID) REFERENCES suppliers (supplierID);
Query OK, 4 rows affected (0.04 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> ALTER TABLE products
    -> ;
Query OK, 0 rows affected (0.00 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |        501 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |        501 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |        501 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |        501 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> DESCRIBE products;
+-------------+------------------+------+-----+----------+----------------+
| Field       | Type             | Null | Key | Default  | Extra          |
+-------------+------------------+------+-----+----------+----------------+
| productID   | int(10) unsigned | NO   | PRI | NULL     | auto_increment |
| productCode | char(3)          | NO   |     |          |                |
| name        | varchar(30)      | NO   |     |          |                |
| quantity    | int(10) unsigned | NO   |     | 0        |                |
| price       | decimal(7,2)     | NO   |     | 99999.99 |                |
| supplierID  | int(10) unsigned | NO   | MUL | NULL     |                |
+-------------+------------------+------+-----+----------+----------------+
6 rows in set (0.00 sec)

mysql> 
mysql> 
mysql> 
mysql> 
mysql> UPDATE products SET supplierID = 502 WHERE productID = 2004;
Query OK, 0 rows affected (0.00 sec)
Rows matched: 0  Changed: 0  Warnings: 0

mysql> 
mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |        501 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |        501 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |        501 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |        501 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> SELECT products.name, price, suppliers.name
    -> FROM products
    -> JOIN suppliers ON products.supplierID = suppliers.supplierID
    -> WHERE price < 0.6;
+-----------+-------+-------------+
| name      | price | name        |
+-----------+-------+-------------+
| Pencil 3B |  0.52 | ABC Traders |
| Pencil 6B |  0.47 | ABC Traders |
+-----------+-------+-------------+
2 rows in set (0.01 sec)

mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |        501 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |        501 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |        501 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |        501 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> select * from suppliers;
+------------+-------------+----------+
| supplierID | name        | phone    |
+------------+-------------+----------+
|        501 | ABC Traders | 88881111 |
|        502 | XYZ Company | 88882222 |
|        503 | QQ Corp     | 88883333 |
+------------+-------------+----------+
3 rows in set (0.00 sec)

mysql> SELECT products.name, price, suppliers.name
    -> FROM products, suppliers
    -> WHERE products.supplierID = suppliers.supplierID
    -> AND price < 0.6;
+-----------+-------+-------------+
| name      | price | name        |
+-----------+-------+-------------+
| Pencil 3B |  0.52 | ABC Traders |
| Pencil 6B |  0.47 | ABC Traders |
+-----------+-------+-------------+
2 rows in set (0.00 sec)

mysql> SELECT products.name AS `Product Name`, price, suppliers.name AS `Supplier
    `> Name`
    -> FROM products
    -> JOIN suppliers ON products.supplierID = suppliers.supplierID
    -> WHERE price < 0.6;
+--------------+-------+---------------+
| Product Name | price | Supplier
Name |
+--------------+-------+---------------+
| Pencil 3B    |  0.52 | ABC Traders   |
| Pencil 6B    |  0.47 | ABC Traders   |
+--------------+-------+---------------+
2 rows in set (0.00 sec)

mysql> 
mysql> SELECT p.name AS `Product Name`, p.price, s.name AS `Supplier Name`
    -> FROM products AS p
    -> JOIN suppliers AS s ON p.supplierID = s.supplierID
    -> WHERE p.price < 0.6;
+--------------+-------+---------------+
| Product Name | price | Supplier Name |
+--------------+-------+---------------+
| Pencil 3B    |  0.52 | ABC Traders   |
| Pencil 6B    |  0.47 | ABC Traders   |
+--------------+-------+---------------+
2 rows in set (0.01 sec)

3.2 Many-To-Many Relationship
mysql> CREATE TABLE products_suppliers (
    -> productID INT UNSIGNED NOT NULL,
    -> supplierID INT UNSIGNED NOT NULL,
    -> -- Same data types as the parent tables
    -> PRIMARY KEY (productID, supplierID),
    -> -- uniqueness
    -> FOREIGN KEY (productID) REFERENCES products (productID),
    -> FOREIGN KEY (supplierID) REFERENCES suppliers (supplierID)
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> 
mysql> 
mysql> desc products_suppliers;
+------------+------------------+------+-----+---------+-------+
| Field      | Type             | Null | Key | Default | Extra |
+------------+------------------+------+-----+---------+-------+
| productID  | int(10) unsigned | NO   | PRI | NULL    |       |
| supplierID | int(10) unsigned | NO   | PRI | NULL    |       |
+------------+------------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> 
mysql> INSERT INTO products_suppliers VALUES (2001, 501), (2002, 501),
    -> (2003, 501), (2004, 502), (2001, 503);
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`southwind`.`products_suppliers`, CONSTRAINT `products_suppliers_ibfk_1` FOREIGN KEY (`productID`) REFERENCES `products` (`productID`))
mysql> 
mysql> select * from products;
+-----------+-------------+-----------+----------+-------+------------+
| productID | productCode | name      | quantity | price | supplierID |
+-----------+-------------+-----------+----------+-------+------------+
|      2001 | PEC         | Pencil 3B |      500 |  0.52 |        501 |
|      2006 | PEC         | Pencil 4B |      200 |  0.62 |        501 |
|      2007 | PEC         | Pencil 5B |      100 |  0.73 |        501 |
|      2008 | PEC         | Pencil 6B |      500 |  0.47 |        501 |
+-----------+-------------+-----------+----------+-------+------------+
4 rows in set (0.00 sec)

mysql> select * from suppliers;
+------------+-------------+----------+
| supplierID | name        | phone    |
+------------+-------------+----------+
|        501 | ABC Traders | 88881111 |
|        502 | XYZ Company | 88882222 |
|        503 | QQ Corp     | 88883333 |
+------------+-------------+----------+
3 rows in set (0.00 sec)

mysql> INSERT INTO products_suppliers VALUES (2001, 501), (2006, 501), (2006, 501), (2007, 502), (2001, 503);
ERROR 1062 (23000): Duplicate entry '2006-501' for key 'PRIMARY'
mysql> INSERT INTO products_suppliers VALUES (2001, 501), (2006, 501), (2006, 502), (2007, 502), (2001, 503);
Query OK, 5 rows affected (0.00 sec)
Records: 5  Duplicates: 0  Warnings: 0

mysql> select * from products_suppliers;
+-----------+------------+
| productID | supplierID |
+-----------+------------+
|      2001 |        501 |
|      2006 |        501 |
|      2006 |        502 |
|      2007 |        502 |
|      2001 |        503 |
+-----------+------------+
5 rows in set (0.00 sec)

mysql> SHOW CREATE TABLE products \G;
*************************** 1. row ***************************
       Table: products
Create Table: CREATE TABLE `products` (
  `productID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `productCode` char(3) NOT NULL DEFAULT '',
  `name` varchar(30) NOT NULL DEFAULT '',
  `quantity` int(10) unsigned NOT NULL DEFAULT '0',
  `price` decimal(7,2) NOT NULL DEFAULT '99999.99',
  `supplierID` int(10) unsigned NOT NULL,
  PRIMARY KEY (`productID`),
  KEY `supplierID` (`supplierID`),
  CONSTRAINT `products_ibfk_1` FOREIGN KEY (`supplierID`) REFERENCES `suppliers` (`supplierID`)
) ENGINE=InnoDB AUTO_INCREMENT=2010 DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

ERROR: 
No query specified

mysql> ALTER TABLE products DROP FOREIGN KEY products_ibfk_1;
Query OK, 4 rows affected (0.02 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> SHOW CREATE TABLE products \G;
*************************** 1. row ***************************
       Table: products
Create Table: CREATE TABLE `products` (
  `productID` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `productCode` char(3) NOT NULL DEFAULT '',
  `name` varchar(30) NOT NULL DEFAULT '',
  `quantity` int(10) unsigned NOT NULL DEFAULT '0',
  `price` decimal(7,2) NOT NULL DEFAULT '99999.99',
  `supplierID` int(10) unsigned NOT NULL,
  PRIMARY KEY (`productID`),
  KEY `supplierID` (`supplierID`)
) ENGINE=InnoDB AUTO_INCREMENT=2010 DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

ERROR: 
No query specified

mysql> ALTER TABLE products DROP supplierID;
Query OK, 4 rows affected (0.02 sec)
Records: 4  Duplicates: 0  Warnings: 0

mysql> DESC products;
+-------------+------------------+------+-----+----------+----------------+
| Field       | Type             | Null | Key | Default  | Extra          |
+-------------+------------------+------+-----+----------+----------------+
| productID   | int(10) unsigned | NO   | PRI | NULL     | auto_increment |
| productCode | char(3)          | NO   |     |          |                |
| name        | varchar(30)      | NO   |     |          |                |
| quantity    | int(10) unsigned | NO   |     | 0        |                |
| price       | decimal(7,2)     | NO   |     | 99999.99 |                |
+-------------+------------------+------+-----+----------+----------------+
5 rows in set (0.00 sec)

mysql> SELECT products.name AS `Product Name`, price, suppliers.name AS `Supplier
    `> Name`
    -> FROM products_suppliers
    -> JOIN products ON products_suppliers.productID = products.productID
    -> JOIN suppliers ON products_suppliers.supplierID = suppliers.supplierID
    -> WHERE price < 0.6;
+--------------+-------+---------------+
| Product Name | price | Supplier
Name |
+--------------+-------+---------------+
| Pencil 3B    |  0.52 | ABC Traders   |
| Pencil 3B    |  0.52 | QQ Corp       |
+--------------+-------+---------------+
2 rows in set (0.00 sec)

mysql> SELECT p.name AS `Product Name`, s.name AS `Supplier Name`
    -> FROM products_suppliers AS ps
    -> JOIN products AS p ON ps.productID = p.productID
    -> JOIN suppliers AS s ON ps.supplierID = s.supplierID
    -> WHERE p.name = 'Pencil 3B';
+--------------+---------------+
| Product Name | Supplier Name |
+--------------+---------------+
| Pencil 3B    | ABC Traders   |
| Pencil 3B    | QQ Corp       |
+--------------+---------------+
2 rows in set (0.00 sec)

mysql> SELECT p.name AS `Product Name`, s.name AS `Supplier Name`
    -> FROM products AS p, products_suppliers AS ps, suppliers AS s
    -> WHERE p.productID = ps.productID
    -> AND ps.supplierID = s.supplierID
    -> AND s.name = 'ABC Traders';
+--------------+---------------+
| Product Name | Supplier Name |
+--------------+---------------+
| Pencil 3B    | ABC Traders   |
| Pencil 4B    | ABC Traders   |
+--------------+---------------+
2 rows in set (0.00 sec)

3.3 One-to-one Relationship
mysql> CREATE TABLE product_details (
    -> productID INT UNSIGNED NOT NULL,
    -> -- same data type as the parent table
    -> comment TEXT NULL,
    -> -- up to 64KB
    -> PRIMARY KEY (productID),
    -> FOREIGN KEY (productID) REFERENCES products (productID)
    -> );
Query OK, 0 rows affected (0.01 sec)

mysql> 
mysql> DESCRIBE product_details;
+-----------+------------------+------+-----+---------+-------+
| Field     | Type             | Null | Key | Default | Extra |
+-----------+------------------+------+-----+---------+-------+
| productID | int(10) unsigned | NO   | PRI | NULL    |       |
| comment   | text             | YES  |     | NULL    |       |
+-----------+------------------+------+-----+---------+-------+
2 rows in set (0.00 sec)

mysql> SHOW CREATE TABLE product_details \G;
*************************** 1. row ***************************
       Table: product_details
Create Table: CREATE TABLE `product_details` (
  `productID` int(10) unsigned NOT NULL,
  `comment` text,
  PRIMARY KEY (`productID`),
  CONSTRAINT `product_details_ibfk_1` FOREIGN KEY (`productID`) REFERENCES `products` (`productID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1
1 row in set (0.00 sec)

3.4 Backup and Restore
> cd path-to-mysql-bin
> mysqldump -u root -p --databases southwind > "d:\myProject\backup_southwind.sql"

(For Windows)-- Start a MySQL client mysql> source
d:/myProject/backup_southwind.sql

or 
> cd path-to-mysql-bin
> mysql -u root -p southwind < d:\myProject\backup_southwind.sql

二. 安装部分
//安装步骤
//uninstall mysql
yum remove mysql mysql-server mysql-libs compat-mysql51
rm -rf /var/lib/mysql
rm /etc/my.cnf

//install mysql 
yum install mysql

//upgrade mysql from5.0 to 5.5(centos5)
wget http://dev.mysql.com/get/mysql-community-release-el5-5.noarch.rpm
rpm -Uvh mysql-community-release-el5-5.noarch.rpm
yum install mysql
yum install mysql-server
service mysqld restart

//mysql download address
http://download.softagency.net/MySQL/Downloads/MySQL-5.6/
https://dl.iuscommunity.org/pub/ius/stable/CentOS/6/x86_64/

//install perl
http://www.centoscn.com/image-text/install/2015/0707/5808.html

//install mysql5 on centos6
https://my.oschina.net/lxrm/blog/542706
//install mysql5 centos6 (source)
http://blog.csdn.net/wendi_0506/article/details/39478369

https://opensourcedbms.com/dbms/how-to-install-mysql-5-5-on-cent-os-6-3-linux-redhat-el-6/

//忘记密码
service mysqld stop
/usr/bin/mysqld_safe --skip-grant-tables & 
mysql -u root -p
       use mysql;
       update user set password=password('123') where user='root';
       flush privileges;
       exit;
service mysqld stop
service mysqld start

//安装错误
错误一：
如果使用host='localhost'进行连接的时候出现无法连接的错误
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on 'localhost' (10061)") 
只需要把localhost改写为127.0.0.1即可正常连接。

错误二：
如果要进行远程连接，出现如下错误
_mysql_exceptions.OperationalError: (2003, "Can't connect to MySQL server on '***.***.***.***' (110)")
解决方法：编辑my.cnf，默认为/etc/mydql/my.cnf，注释掉bind-address = 127.0.0.1或者修改为0.0.0.0 ，如下
# Instead of skip-networking the default is now to listen only on
# localhost which is more compatible and is not less secure.
# bind-address           = 127.0.0.1
        
错误三：
如果连接数据库过程中出现如下错误
_mysql_exceptions.OperationalError: (1130, "Host 'xxx.xxx.xxx.xxx' is not allowed to connect to this MySQL server")
意为需要登录数据库的用户名没有远程登录的权限，解决方法
mysql> GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'password' WITH GRANT OPTION;
用户名和密码替换为需要的，其中'root'@'%'，意味着用户root可以在任意主机上登录该数据库，如果将'%'换成相应主机名，则只有在该主机才可以登陆该数据库。
        
错误四：
如果运行多线程时候出现以下错误
(1040, 'Too many connections')
解决方法如下：编辑my.cnf，默认为/etc/mydql/my.cnf，修改max_connections的值为10000，默认为100，实际MySQL服务器允许的最大连接数16384。
之前的程序结构为抓取到一条数据即产生一条sql语句即插入一条数据，修改程序结构为将各进程线程产生的sql语句put进Queue，用一个单独的进程不断get出sql插入数据库同样可以解决以上问题。

错误五:
/usr/sbin/mysqld: Can't create/write to file '/tmp/ib16rzbE' (Errcode: 13 - Permission denied)
解决方法:
[root@newissupper mysql]# chown root:root /tmp
[root@newissupper mysql]# chmod 1777 /tmp
[root@newissupper mysql]# /etc/init.d/mysqld start

//Python &MySql
#centos安装pip和easy_install
wget https://bootstrap.pypa.io/get-pip.py --no-check-certificate
python get-pip.py

yum -y install python-setuptools
easy_install simplejson

https://michaelheap.com/installing-simplejson-on-python-2-4-for-centos-5-7/

# centos安装python27
wget http://python.org/ftp/python/2.7.5/Python-2.7.5.tar.bz2
tar jxvf Python-2.7.5.tar.bz2
cd Python-2.7.5
./configure
make
make install

# install at centos
yum install -y mysql-devel python-devel python-setuptools
easy_install  MySQL-python

三. Windows工具
Navicat for mysql
注册: 
名称和组织不用填写
NAVH-WK6A-DMVK-DKW3

四, 存储查询
//所有库
SELECT table_schema AS "Database", 
ROUND(SUM(data_length + index_length) / 1024 / 1024, 2) AS "Size (MB)" 
FROM information_schema.TABLES 
GROUP BY table_schema;

//特定表
SELECT table_name AS "Table",
ROUND(((data_length + index_length) / 1024 / 1024), 2) AS "Size (MB)"
FROM information_schema.TABLES
WHERE table_schema = "database_name"
ORDER BY (data_length + index_length) DESC;
